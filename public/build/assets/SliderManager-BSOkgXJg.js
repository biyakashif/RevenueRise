import{r as n,q as ne,n as R,p as re,w as de,e as t,a as h,k as $,o as c,F as G,j as N,y as P,t as g,g as q,i as J,m as K,A as F,B as ue}from"./app-CdvAI5iq.js";import{_ as ce}from"./AdminLayout-DZFzOaKL.js";const ve={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-4 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},he={class:"mb-8"},ge={class:"flex justify-between items-center mb-4"},me={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},be={class:"aspect-video bg-white/20 relative"},pe=["src","alt"],fe={class:"absolute top-2 right-2"},xe=["onClick"],we={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},ye={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},_e={class:"p-4"},ke={class:"font-medium text-gray-900"},Ce={class:"text-sm text-gray-500"},Me={class:"mt-3 flex space-x-2"},Ie=["onClick"],De=["onClick"],Se={class:"mb-8"},ze={class:"flex justify-between items-center mb-4"},Be={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Re={class:"aspect-video bg-white/20 relative"},$e=["src","alt"],je={class:"absolute top-2 right-2"},Le=["onClick"],Ue={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},Ee={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},We={class:"p-4"},Fe={class:"font-medium text-gray-900"},He={class:"text-sm text-gray-500"},Ae={class:"mt-3 flex space-x-2"},Te=["onClick"],Ve=["onClick"],Oe={class:"mt-3"},Xe={class:"text-lg font-semibold text-white mb-4"},Ye={class:"mb-4"},Ge={class:"mb-4"},Ne=["required"],Pe={class:"text-xs text-white/70 mt-1"},qe={key:0},Je={key:1},Ke={key:0,class:"mt-2 text-sm text-green-400"},Qe={class:"mb-4"},Ze={class:"flex justify-end space-x-2"},et=["disabled"],tt={key:1,class:"fixed inset-0 bg-black bg-opacity-75 overflow-y-auto h-full w-full z-50 flex items-center justify-center"},lt={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl rounded-2xl p-6 w-full max-w-4xl mx-4 border border-white/20"},ot={class:"text-lg font-semibold text-white mb-4"},st={class:"bg-white/10 rounded-lg p-4 mb-4"},at={class:"text-sm text-white/80 mb-4"},it={key:2,class:"fixed inset-0 bg-black bg-opacity-40 overflow-y-auto h-full w-full z-50 flex items-center justify-center"},nt={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl rounded-2xl p-6 w-full max-w-sm mx-4 border border-white/20"},rt={class:"text-center"},dt={class:"text-white/80 mb-4"},ut={class:"flex space-x-2"},ct=["disabled"],mt={__name:"SliderManager",setup(vt){const H=n([]),A=n([]),I=n(!1),b=n("desktop"),p=n(!1),j=n(null),f=n(!1),v=n({title:"",image:null,sort_order:0}),k=n(null),C=n(!1),x=n(null),D=n(null),S=n(null),l=n({x:0,y:0,width:0,height:0}),L=n(!1),U=n({x:0,y:0}),y=n(!1),_=n(""),z=n(!1),M=n(null);ne(()=>{B()});const B=()=>{R.reload({onSuccess:s=>{H.value=s.props.desktopImages||[],A.value=s.props.mobileImages||[]}})},T=s=>{b.value=s,p.value=!1,j.value=null,v.value={title:"",image:null,sort_order:0},I.value=!0},V=s=>{b.value=s.type,p.value=!0,j.value=s,v.value={title:s.title||"",sort_order:s.sort_order||0},I.value=!0},E=()=>{I.value=!1,C.value=!1,v.value={title:"",image:null,sort_order:0},k.value&&(k.value.value="")},Q=s=>{const e=s.target.files[0];if(e){S.value=e;const a=new FileReader;a.onload=o=>{D.value=o.target.result,C.value=!0,ue(()=>{Z()})},a.readAsDataURL(e)}},Z=()=>{const s=new Image;s.onload=()=>{const e=x.value,a=e.getContext("2d"),i=e.parentElement.clientWidth-40,d=400;let r=s.width,u=s.height;if(r>i&&(u=u*i/r,r=i),u>d&&(r=r*d/u,u=d),e.width=r,e.height=u,a.drawImage(s,0,0,r,u),b.value==="mobile"){const m=Math.min(r*.8,u*2),w=m/2;l.value={x:(r-m)/2,y:(u-w)/2,width:m,height:w}}else{const m=Math.min(r*.8,u*5/2),w=m*2/5;l.value={x:(r-m)/2,y:(u-w)/2,width:m,height:w}}W()},s.src=D.value},W=()=>{const s=x.value,e=s.getContext("2d"),a=new Image;a.onload=()=>{e.clearRect(0,0,s.width,s.height),e.drawImage(a,0,0,s.width,s.height),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,s.width,s.height),e.clearRect(l.value.x,l.value.y,l.value.width,l.value.height),e.drawImage(a,l.value.x*(a.width/s.width),l.value.y*(a.height/s.height),l.value.width*(a.width/s.width),l.value.height*(a.height/s.height),l.value.x,l.value.y,l.value.width,l.value.height),e.strokeStyle="#3b82f6",e.lineWidth=2,e.strokeRect(l.value.x,l.value.y,l.value.width,l.value.height);const o=8;e.fillStyle="#3b82f6",e.fillRect(l.value.x-o/2,l.value.y-o/2,o,o),e.fillRect(l.value.x+l.value.width-o/2,l.value.y-o/2,o,o),e.fillRect(l.value.x-o/2,l.value.y+l.value.height-o/2,o,o),e.fillRect(l.value.x+l.value.width-o/2,l.value.y+l.value.height-o/2,o,o)},a.src=D.value},ee=s=>{const a=x.value.getBoundingClientRect(),o=s.clientX-a.left,i=s.clientY-a.top,d=8;Math.abs(o-l.value.x)<d&&Math.abs(i-l.value.y)<d?(y.value=!0,_.value="nw"):Math.abs(o-(l.value.x+l.value.width))<d&&Math.abs(i-l.value.y)<d?(y.value=!0,_.value="ne"):Math.abs(o-l.value.x)<d&&Math.abs(i-(l.value.y+l.value.height))<d?(y.value=!0,_.value="sw"):Math.abs(o-(l.value.x+l.value.width))<d&&Math.abs(i-(l.value.y+l.value.height))<d?(y.value=!0,_.value="se"):o>=l.value.x&&o<=l.value.x+l.value.width&&i>=l.value.y&&i<=l.value.y+l.value.height&&(L.value=!0,U.value={x:o-l.value.x,y:i-l.value.y})},te=s=>{const e=x.value,a=e.getBoundingClientRect(),o=s.clientX-a.left,i=s.clientY-a.top;if(L.value){const d=Math.max(0,Math.min(o-U.value.x,e.width-l.value.width)),r=Math.max(0,Math.min(i-U.value.y,e.height-l.value.height));l.value.x=d,l.value.y=r,W()}else if(y.value){const d=b.value==="mobile"?.5:.4;if(_.value==="se"){const r=Math.max(50,o-l.value.x),u=r*d;l.value.x+r<=e.width&&l.value.y+u<=e.height&&(l.value.width=r,l.value.height=u)}W()}},O=()=>{L.value=!1,y.value=!1,_.value=""},le=()=>{const s=document.createElement("canvas"),e=s.getContext("2d"),a=new Image;a.onload=()=>{const o=a.width/x.value.width,i=a.height/x.value.height,d=l.value.x*o,r=l.value.y*i,u=l.value.width*o,m=l.value.height*i;s.width=u,s.height=m,e.drawImage(a,d,r,u,m,0,0,u,m),s.toBlob(w=>{v.value.image=new File([w],S.value.name,{type:S.value.type}),C.value=!1},S.value.type,.9)},a.src=D.value},oe=()=>{C.value=!1,v.value.image=null,k.value&&(k.value.value="")},se=()=>{f.value=!0;const s=new FormData;s.append("title",v.value.title),s.append("type",b.value),s.append("sort_order",v.value.sort_order),v.value.image&&s.append("image",v.value.image);const e=p.value?`/admin/sliders/${j.value.id}`:"/admin/sliders",a=(p.value,"post");R[a](e,s,{onSuccess:()=>{f.value=!1,E(),B()},onError:()=>{f.value=!1}})},X=s=>{R.post(`/admin/sliders/${s.id}/toggle`,{},{onSuccess:()=>{B()}})},Y=s=>{M.value=s,z.value=!0},ae=()=>{R.delete(`/admin/sliders/${M.value.id}`,{onSuccess:()=>{z.value=!1,M.value=null,B()}})},ie=()=>{z.value=!1,M.value=null};return(s,e)=>(c(),re(ce,null,{default:de(()=>{var a;return[t("div",ve,[e[20]||(e[20]=t("h1",{class:"text-lg font-bold text-slate-800 drop-shadow-sm mb-4"},"Slider Management",-1)),t("div",he,[t("div",ge,[e[5]||(e[5]=t("h2",{class:"text-base font-medium text-slate-800 drop-shadow-sm"},"Desktop Slider Images",-1)),t("button",{onClick:e[0]||(e[0]=o=>T("desktop")),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Add Desktop Image ")]),t("div",me,[(c(!0),h(G,null,N(H.value,o=>(c(),h("div",{key:o.id,class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},[t("div",be,[t("img",{src:`/storage/${o.image_path}`,alt:o.title,class:"w-full h-full object-cover"},null,8,pe),t("div",fe,[t("button",{onClick:i=>X(o),class:P([o.is_active?"bg-green-500":"bg-gray-400","w-6 h-6 rounded-full flex items-center justify-center text-white text-xs"])},[o.is_active?(c(),h("svg",we,[...e[6]||(e[6]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(c(),h("svg",ye,[...e[7]||(e[7]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])]))],10,xe)])]),t("div",_e,[t("h3",ke,g(o.title||"Untitled"),1),t("p",Ce,"Order: "+g(o.sort_order),1),t("div",Me,[t("button",{onClick:i=>V(o),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,Ie),t("button",{onClick:i=>Y(o),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Delete ",8,De)])])]))),128))])]),t("div",Se,[t("div",ze,[e[8]||(e[8]=t("h2",{class:"text-base font-medium text-slate-800 drop-shadow-sm"},"Mobile Slider Images",-1)),t("button",{onClick:e[1]||(e[1]=o=>T("mobile")),class:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Add Mobile Image ")]),t("div",Be,[(c(!0),h(G,null,N(A.value,o=>(c(),h("div",{key:o.id,class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},[t("div",Re,[t("img",{src:`/storage/${o.image_path}`,alt:o.title,class:"w-full h-full object-cover"},null,8,$e),t("div",je,[t("button",{onClick:i=>X(o),class:P([o.is_active?"bg-green-500":"bg-gray-400","w-6 h-6 rounded-full flex items-center justify-center text-white text-xs"])},[o.is_active?(c(),h("svg",Ue,[...e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(c(),h("svg",Ee,[...e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])]))],10,Le)])]),t("div",We,[t("h3",Fe,g(o.title||"Untitled"),1),t("p",He,"Order: "+g(o.sort_order),1),t("div",Ae,[t("button",{onClick:i=>V(o),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,Te),t("button",{onClick:i=>Y(o),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Delete ",8,Ve)])])]))),128))])]),I.value?(c(),h("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-40 overflow-y-auto h-full w-full z-50",onClick:E},[t("div",{class:"relative top-20 mx-auto p-6 w-96 shadow-2xl rounded-lg bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl border border-white/20",onClick:e[4]||(e[4]=q(()=>{},["stop"]))},[t("div",Oe,[t("h3",Xe,g(p.value?"Edit":"Upload")+" "+g(b.value==="desktop"?"Desktop":"Mobile")+" Image ",1),t("form",{onSubmit:q(se,["prevent"]),enctype:"multipart/form-data"},[t("div",Ye,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Title (Optional)",-1)),J(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>v.value.title=o),type:"text",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:"Enter image title"},null,512),[[K,v.value.title]])]),t("div",Ge,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Image Upload ",-1)),t("input",{ref_key:"imageInput",ref:k,onChange:Q,type:"file",accept:"image/*",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100",required:!p.value},null,40,Ne),t("p",Pe,[F(" Max size: "+g(b.value==="desktop"?"2MB":"1MB")+". Formats: JPEG, PNG, JPG, GIF, WebP ",1),b.value==="desktop"?(c(),h("span",qe," - Desktop version (5:2 ratio)")):(c(),h("span",Je," - Mobile optimized (2:1 ratio)"))]),v.value.image?(c(),h("div",Ke," ✓ Image cropped and ready ")):$("",!0)]),t("div",Qe,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Sort Order",-1)),J(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>v.value.sort_order=o),type:"number",min:"0",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:"0"},null,512),[[K,v.value.sort_order,void 0,{number:!0}]])]),t("div",Ze,[t("button",{type:"button",onClick:E,class:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{type:"submit",disabled:f.value,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded text-sm hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200 disabled:opacity-50"},g(f.value?"Uploading...":p.value?"Update":"Upload"),9,et)])],32)])])])):$("",!0),C.value?(c(),h("div",tt,[t("div",lt,[t("h3",ot," Crop Image for "+g(b.value==="desktop"?"Desktop (5:2)":"Mobile (2:1)"),1),t("div",st,[t("canvas",{ref_key:"cropCanvas",ref:x,onMousedown:ee,onMousemove:te,onMouseup:O,onMouseleave:O,class:"max-w-full cursor-move border border-white/30 rounded"},null,544)]),t("div",at,[e[14]||(e[14]=t("p",null,"• Drag the crop area to reposition",-1)),e[15]||(e[15]=t("p",null,"• Drag the corner handles to resize (maintains aspect ratio)",-1)),t("p",null,"• "+g(b.value==="desktop"?"Desktop images use 5:2 aspect ratio":"Mobile images use 2:1 aspect ratio"),1)]),t("div",{class:"flex justify-end space-x-3"},[t("button",{onClick:oe,class:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{onClick:le,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded text-sm hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"}," Crop & Continue ")])])])):$("",!0),z.value?(c(),h("div",it,[t("div",nt,[t("div",rt,[e[18]||(e[18]=t("div",{class:"w-12 h-12 mx-auto mb-4 bg-red-100/20 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-white mb-2"},"Delete Image",-1)),t("p",dt,[e[16]||(e[16]=F("Are you sure you want to delete ",-1)),t("strong",null,g(((a=M.value)==null?void 0:a.title)||"this image"),1),e[17]||(e[17]=F("? This action cannot be undone.",-1))]),t("div",ut,[t("button",{onClick:ie,class:"flex-1 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{onClick:ae,class:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded text-sm hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200",disabled:f.value},g(f.value?"Deleting...":"Delete"),9,ct)])])])])):$("",!0)])]}),_:1}))}};export{mt as default};
