import{u as V,f as O,r as h,g as S,a as n,b as _,d as r,h as A,w as v,e as s,l as B,i as E,j as f,v as b,o as d,F as w,k as I,m as g,t as k,n as z,p as D}from"./app-C5R0GNTt.js";import{_ as F}from"./AdminLayout-3-NIxIvz.js";const H={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},P={class:"flex justify-between items-center mb-4 sm:mb-6"},T={class:"flex items-center gap-3"},N={class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 p-6"},W={class:"bg-white/20 rounded-lg p-4 border border-white/30"},q={class:"flex items-center mb-4"},G={class:"bg-white/20 rounded-lg p-4 border border-white/30"},J={class:"space-y-4"},K={class:"flex items-start justify-between mb-2"},Q={class:"block text-sm font-medium text-slate-700"},X=["onClick"],Y={class:"flex items-center space-x-2 mb-3"},Z=["onChange"],ee=["onClick","title"],te=["onChange"],se=["onClick","title"],oe={key:0,class:"mb-3 relative"},ae=["src"],le=["onClick"],ie={key:1,class:"mb-3 relative"},re=["src"],ne=["onClick"],de=["onUpdate:modelValue","placeholder"],ce={key:2,class:"text-red-500 text-sm mt-1"},ue={class:"mt-3 flex items-center"},me=["id","onUpdate:modelValue"],ge=["for"],pe={class:"flex justify-end"},_e=["disabled"],fe={key:0},he={key:1},we={__name:"AutoReplySettings",props:{settings:Object,messages:Array,contactSettings:Object},setup(y){const x=V(),p=y,o=O({is_enabled:p.settings.is_enabled||!1,messages:p.messages.length>0?p.messages:[{message:"Welcome! How can we help you today?",include_contact_info:!1,image_path:null,video_path:null},{message:"Hello [user_name]! Thank you for contacting us.",include_contact_info:!1,image_path:null,video_path:null},{message:"Thank you for your message. We will get back to you soon.",include_contact_info:!1,image_path:null,video_path:null}]}),U=()=>{o.messages.push({message:"",include_contact_info:!1,image_path:null,video_path:null})},j=t=>{if(o.messages.length>1){const e=o.messages[t];e.image_preview&&URL.revokeObjectURL(e.image_preview),e.video_preview&&URL.revokeObjectURL(e.video_preview),o.messages.splice(t,1)}},u=h([]),m=h([]),R=(t,e)=>{const a=e.target.files[0];if(a){if(a.size>5*1024*1024){alert("Image file size must not exceed 5MB."),e.target.value="";return}o.messages[t].image_preview&&URL.revokeObjectURL(o.messages[t].image_preview),o.messages[t].image_file=a,o.messages[t].image_preview=URL.createObjectURL(a)}},L=(t,e)=>{const a=e.target.files[0];if(a){if(a.size>30*1024*1024){alert("Video file size must not exceed 30MB."),e.target.value="";return}o.messages[t].video_preview&&URL.revokeObjectURL(o.messages[t].video_preview),o.messages[t].video_file=a,o.messages[t].video_preview=URL.createObjectURL(a)}},C=t=>{o.messages[t].image_preview&&URL.revokeObjectURL(o.messages[t].image_preview),o.messages[t].image_file=null,o.messages[t].image_preview=null,u.value[t]&&(u.value[t].value="")},M=t=>{o.messages[t].video_preview&&URL.revokeObjectURL(o.messages[t].video_preview),o.messages[t].video_file=null,o.messages[t].video_preview=null,m.value[t]&&(m.value[t].value="")},$=()=>{const t=new FormData;t.append("is_enabled",o.is_enabled?"1":"0"),o.messages.forEach((e,a)=>{t.append(`messages[${a}][message]`,e.message),t.append(`messages[${a}][include_contact_info]`,e.include_contact_info?"1":"0"),e.image_file&&t.append(`messages[${a}][image]`,e.image_file),e.video_file&&t.append(`messages[${a}][video]`,e.video_file)}),t.append("_token",x.props.csrf_token),fetch(route("admin.auto-reply.update"),{method:"POST",headers:{Accept:"application/json"},body:t}).then(e=>{if(e.status===419){window.location.reload();return}return e.json()}).then(e=>{e&&e.success?D.visit("/admin/support"):alert("Error saving settings. Please try again.")}).catch(e=>{console.error("Error:",e),alert("Error saving settings. Please try again.")})};return S(()=>{o.messages.forEach(t=>{t.image_preview&&URL.revokeObjectURL(t.image_preview),t.video_preview&&URL.revokeObjectURL(t.video_preview)})}),(t,e)=>(d(),n(w,null,[_(r(A),{title:"Auto Reply Settings"}),_(F,null,{default:v(()=>[s("div",H,[s("div",P,[s("div",T,[_(r(B),{href:"/admin/support",class:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-500/80 to-gray-600/80 hover:from-slate-600/90 hover:to-gray-700/90 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105"},{default:v(()=>[...e[1]||(e[1]=[s("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e[2]||(e[2]=s("div",null,[s("h1",{class:"text-lg sm:text-xl font-bold text-slate-800 drop-shadow-sm"},"Auto Reply Settings"),s("p",{class:"text-xs sm:text-sm text-slate-600 font-medium"},"Configure automatic reply messages")],-1))])]),s("div",N,[s("form",{onSubmit:E($,["prevent"]),class:"space-y-6"},[s("div",W,[s("div",q,[f(s("input",{id:"is_enabled","onUpdate:modelValue":e[0]||(e[0]=a=>r(o).is_enabled=a),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[b,r(o).is_enabled]]),e[3]||(e[3]=s("label",{for:"is_enabled",class:"ml-2 text-sm font-medium text-slate-700"}," Enable Auto Reply ",-1))]),e[4]||(e[4]=s("p",{class:"text-xs text-slate-600"},"When enabled, automatic messages will be sent to users after they send messages.",-1))]),s("div",G,[e[7]||(e[7]=s("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Auto Reply Messages",-1)),s("div",J,[(d(!0),n(w,null,I(r(o).messages,(a,l)=>(d(),n("div",{key:l,class:"bg-white/10 rounded-lg p-4 border border-white/20"},[s("div",K,[s("label",Q,"Message "+k(l+1),1),r(o).messages.length>1?(d(),n("button",{key:0,type:"button",onClick:i=>j(l),class:"text-xs bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded"}," Remove ",8,X)):g("",!0)]),s("div",Y,[s("input",{type:"file",ref_for:!0,ref:i=>u.value[l]=i,class:"hidden",onChange:i=>R(l,i),accept:"image/*"},null,40,Z),s("button",{type:"button",onClick:i=>{var c;return(c=u.value[l])==null?void 0:c.click()},class:"p-2 bg-white/50 backdrop-blur-sm rounded-full shadow-md focus:outline-none border border-white/30 hover:bg-white/70 transition-all",title:"Upload Image for Message "+(l+1)},[...e[5]||(e[5]=[s("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],8,ee),s("input",{type:"file",ref_for:!0,ref:i=>m.value[l]=i,class:"hidden",onChange:i=>L(l,i),accept:"video/mp4,video/x-mkv"},null,40,te),s("button",{type:"button",onClick:i=>{var c;return(c=m.value[l])==null?void 0:c.click()},class:"p-2 bg-white/50 backdrop-blur-sm rounded-full shadow-md focus:outline-none border border-white/30 hover:bg-white/70 transition-all",title:"Upload Video for Message "+(l+1)},[...e[6]||(e[6]=[s("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,se)]),a.image_preview||a.image_path?(d(),n("div",oe,[s("img",{src:a.image_preview||(a.image_path?`/storage/${a.image_path}`:""),alt:"Message image",class:"w-20 h-20 object-cover rounded cursor-pointer"},null,8,ae),s("button",{onClick:i=>C(l),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"}," × ",8,le)])):g("",!0),a.video_preview||a.video_path?(d(),n("div",ie,[s("video",{src:a.video_preview||(a.video_path?`/storage/${a.video_path}`:""),class:"w-20 h-20 object-cover rounded cursor-pointer",controls:""},null,8,re),s("button",{onClick:i=>M(l),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"}," × ",8,ne)])):g("",!0),f(s("textarea",{"onUpdate:modelValue":i=>a.message=i,rows:"3",class:"w-full rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 py-2 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:`Enter auto reply message ${l+1}...`,required:""},null,8,de),[[z,a.message]]),r(o).errors[`messages.${l}.message`]?(d(),n("div",ce,k(r(o).errors[`messages.${l}.message`]),1)):g("",!0),s("div",ue,[f(s("input",{id:`include_contact_info_${l}`,"onUpdate:modelValue":i=>a.include_contact_info=i,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,me),[[b,a.include_contact_info]]),s("label",{for:`include_contact_info_${l}`,class:"ml-2 text-sm font-medium text-slate-700"}," Include contact information with this message ",8,ge)])]))),128))]),s("button",{type:"button",onClick:U,class:"mt-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg transform hover:scale-105"}," Add Message ")]),s("div",pe,[s("button",{type:"submit",disabled:r(o).processing,class:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg transform hover:scale-105 disabled:opacity-50"},[r(o).processing?(d(),n("span",fe,"Saving...")):(d(),n("span",he,"Save Settings"))],8,_e)])],32)])])]),_:1})],64))}};export{we as default};
