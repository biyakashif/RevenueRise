import{u as A,r as m,G as V,c as I,A as z,n as g,p as O,w as C,e,a as n,k as i,b as R,T as $,o as d,z as F,t as r,i as u,d as M,m as c,F as L,j as W,g as G,y as q,x as E}from"./app-DxfmXC0O.js";import{_ as H}from"./AdminLayout-B6Je0JR7.js";import{l as J}from"./lodash-CoUpdhXI.js";const K={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-4 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},Q={class:"mb-4"},X={class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},Y={class:"overflow-x-auto"},Z={class:"w-full"},ee={class:"divide-y divide-white/10"},te={class:"px-2 py-2 text-xs font-medium text-slate-800"},se={class:"px-2 py-2 text-xs text-slate-700"},le={class:"px-2 py-2 text-xs text-slate-700"},oe={class:"px-2 py-2 text-xs text-slate-700"},re={class:"px-2 py-2 text-xs text-slate-700"},ae={class:"px-2 py-2 text-xs text-slate-700"},de={class:"px-2 py-2 text-xs text-slate-700"},ne={class:"px-2 py-2 text-xs text-slate-700"},ie={class:"px-2 py-2 text-xs text-slate-700"},ue={class:"px-2 py-2 text-xs text-slate-700"},ce={class:"px-2 py-2 text-xs"},pe=["onClick"],be=["onClick"],me={key:0,class:"text-center text-slate-600 text-sm mt-4"},xe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fe={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto border border-white/20"},we={class:"text-lg font-bold mb-4 text-slate-800"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={key:0,class:"text-xs text-red-600 mt-1"},ye={key:0,class:"text-xs text-red-600 mt-1"},ge={key:0,class:"text-xs text-red-600 mt-1"},ke={key:0,class:"text-xs text-red-600 mt-1"},_e={key:0,class:"text-xs text-red-600 mt-1"},Ue={key:0,class:"text-xs text-red-600 mt-1"},Ve={key:0,class:"text-xs text-red-600 mt-1"},Ce={key:0,class:"text-xs text-red-600 mt-1"},Me={key:0,class:"text-xs text-red-600 mt-1"},Ee={key:0,class:"text-xs text-red-600 mt-1"},De={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ne={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-md border border-white/20"},Se={class:"mt-2 text-sm text-slate-700"},je={class:"font-medium text-slate-800"},Ae={__name:"Users",props:{users:Array,search:String},setup(D){const p=A(),w=D,h=m(w.search),v=m(!1),y=m(!1),x=m(null),l=V({id:null,name:"",mobile_number:"",password:"",withdraw_password:"",invitation_code:"",balance:0,role:"user",referred_by:"",vip_level:"",referral_percentage:10}),o=V({}),b=m(""),f=m(""),N=I(()=>({"bg-green-100 border-green-500 text-green-700":f.value==="success","bg-red-100 border-red-500 text-red-700":f.value==="error"}));z(()=>p.props.flash,a=>{a.success?(b.value=a.success,f.value="success"):a.error?(b.value=a.error,f.value="error"):(b.value="",f.value=""),b.value&&setTimeout(()=>{b.value="",p.props.flash.success&&(p.props.flash.success=null),p.props.flash.error&&(p.props.flash.error=null)},2e3)},{deep:!0});const k=J.debounce(()=>{g.get(route("admin.users"),{search:h.value},{preserveState:!0,replace:!0})},300),S=a=>{Object.assign(l,a),l.password="",l.withdraw_password="",Object.keys(o).forEach(t=>delete o[t]),v.value=!0},_=()=>{v.value=!1},j=()=>{Object.keys(o).forEach(a=>delete o[a]),g.patch(route("admin.users.update",l.id),{...l,_token:p.props.csrf_token},{preserveScroll:!0,onSuccess:()=>_(),onError:a=>{var t;if(a&&((t=a.message)!=null&&t.includes("419")||a.status===419)){window.location.reload();return}Object.assign(o,a)}})},P=a=>{x.value=a,y.value=!0},U=()=>{x.value=null,y.value=!1},T=()=>{x.value&&g.delete(route("admin.users.destroy",x.value.id),{data:{_token:p.props.csrf_token},preserveScroll:!0,onSuccess:()=>U(),onError:a=>{var t;a&&((t=a.message)!=null&&t.includes("419")||a.status===419)&&window.location.reload()}})};return(a,t)=>(d(),O(H,null,{default:C(()=>[e("div",K,[t[13]||(t[13]=e("h2",{class:"text-lg font-bold text-slate-800 drop-shadow-sm mb-4"},"User Management",-1)),R($,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:C(()=>[b.value?(d(),n("div",{key:0,class:F([N.value,"border-l-4 p-4 mb-4"]),role:"alert"},[e("p",null,r(b.value),1)],2)):i("",!0)]),_:1}),e("div",Q,[u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),onInput:t[1]||(t[1]=(...s)=>M(k)&&M(k)(...s)),type:"text",placeholder:"Search by name, mobile, invitation code, or VIP level...",class:"w-full h-12 rounded-xl bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-4 placeholder-slate-400 backdrop-blur-sm shadow-lg"},null,544),[[c,h.value]])]),e("div",X,[e("div",Y,[e("table",Z,[t[12]||(t[12]=e("thead",null,[e("tr",{class:"bg-white/20 text-slate-700 text-xs font-medium"},[e("th",{class:"px-2 py-2 text-left"},"Name"),e("th",{class:"px-2 py-2 text-left"},"Mobile"),e("th",{class:"px-2 py-2 text-left"},"VIP"),e("th",{class:"px-2 py-2 text-left"},"Balance"),e("th",{class:"px-2 py-2 text-left"},"Pass"),e("th",{class:"px-2 py-2 text-left"},"W.Pass"),e("th",{class:"px-2 py-2 text-left"},"Inv.Code"),e("th",{class:"px-2 py-2 text-left"},"Ref.By"),e("th",{class:"px-2 py-2 text-left"},"Tasks %"),e("th",{class:"px-2 py-2 text-left"},"Date"),e("th",{class:"px-2 py-2 text-left"},"Actions")])],-1)),e("tbody",ee,[(d(!0),n(L,null,W(w.users,s=>(d(),n("tr",{key:s.id,class:"hover:bg-white/10 transition-all duration-200"},[e("td",te,r(s.name),1),e("td",se,r(s.mobile_number),1),e("td",le,r(s.vip_level),1),e("td",oe,"$"+r(s.balance.toFixed(2)),1),e("td",re,r(s.password),1),e("td",ae,r(s.withdraw_password),1),e("td",de,r(s.invitation_code||"N/A"),1),e("td",ne,r(s.referred_by||"N/A"),1),e("td",ie,r(s.referral_percentage||10)+"%",1),e("td",ue,r(s.register_date),1),e("td",ce,[e("button",{onClick:B=>S(s),class:"text-blue-600 hover:text-blue-700 mr-2 text-xs"},"Edit",8,pe),e("button",{onClick:B=>P(s),class:"text-red-600 hover:text-red-700 text-xs"},"Del",8,be)])]))),128))])])])]),w.users.length?i("",!0):(d(),n("p",me,"No users found."))]),v.value?(d(),n("div",xe,[e("div",fe,[e("h3",we,"Edit User: "+r(l.name),1),e("form",{onSubmit:G(j,["prevent"])},[e("div",he,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-slate-700 mb-1"},"Name",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.name=s),type:"text",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg text-sm"},null,512),[[c,l.name]]),o.name?(d(),n("p",ve,r(o.name),1)):i("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-white/80"},"Mobile Number",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.mobile_number=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.mobile_number]]),o.mobile_number?(d(),n("p",ye,r(o.mobile_number),1)):i("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-white/80"},"Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.password]]),o.password?(d(),n("p",ge,r(o.password),1)):i("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-white/80"},"Withdraw Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.withdraw_password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.withdraw_password]]),o.withdraw_password?(d(),n("p",ke,r(o.withdraw_password),1)):i("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-white/80"},"Invitation Code",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.invitation_code=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.invitation_code]]),o.invitation_code?(d(),n("p",_e,r(o.invitation_code),1)):i("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-white/80"},"Balance",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.balance=s),type:"number",step:"0.01",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.balance]]),o.balance?(d(),n("p",Ue,r(o.balance),1)):i("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-white/80"},"Role",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.role=s),class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[20]||(t[20]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[q,l.role]]),o.role?(d(),n("p",Ve,r(o.role),1)):i("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-white/80"},"Referred By (Invitation Code)",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.referred_by=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.referred_by]]),o.referred_by?(d(),n("p",Ce,r(o.referred_by),1)):i("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-white/80"},"VIP Level",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.vip_level=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.vip_level]]),o.vip_level?(d(),n("p",Me,r(o.vip_level),1)):i("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-white/80"},"Referral Percentage (%)",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.referral_percentage=s),type:"number",step:"0.01",min:"0",max:"100",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[c,l.referral_percentage]]),o.referral_percentage?(d(),n("p",Ee,r(o.referral_percentage),1)):i("",!0)])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{type:"button",onClick:_,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),t[25]||(t[25]=e("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"},"Update User",-1))])],32)])])):i("",!0),y.value?(d(),n("div",De,[e("div",Ne,[t[28]||(t[28]=e("h3",{class:"text-lg font-bold text-slate-800"},"Confirm Deletion",-1)),e("p",Se,[t[26]||(t[26]=E(" Are you sure you want to delete the user ",-1)),e("span",je,r(x.value.name),1),t[27]||(t[27]=E("? This action cannot be undone. ",-1))]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:U,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),e("button",{onClick:T,class:"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-md hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200"},"Delete User")])])])):i("",!0)]),_:1}))}};export{Ae as default};
