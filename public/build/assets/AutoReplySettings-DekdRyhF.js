import{u as S,f as A,r as _,a as r,b as h,d as i,h as L,w as b,e,l as B,g as E,i as f,v,o as d,F as w,j as I,k as g,t as y,m as O,n as z}from"./app-DxfmXC0O.js";import{_ as D}from"./AdminLayout-B6Je0JR7.js";const F={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},H={class:"flex justify-between items-center mb-4 sm:mb-6"},P={class:"flex items-center gap-3"},T={class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 p-6"},N={class:"bg-white/20 rounded-lg p-4 border border-white/30"},W={class:"flex items-center mb-4"},q={class:"bg-white/20 rounded-lg p-4 border border-white/30"},G={class:"space-y-4"},J={class:"flex items-start justify-between mb-2"},K={class:"block text-sm font-medium text-slate-700"},Q=["onClick"],X={class:"flex items-center space-x-2 mb-3"},Y=["onChange"],Z=["onClick","title"],ee=["onChange"],te=["onClick","title"],se={key:0,class:"mb-3 relative"},oe=["src"],ae=["onClick"],le={key:1,class:"mb-3 relative"},ne=["src"],ie=["onClick"],re=["onUpdate:modelValue","placeholder"],de={key:2,class:"text-red-500 text-sm mt-1"},ce={class:"mt-3 flex items-center"},ue=["id","onUpdate:modelValue"],me=["for"],ge={class:"flex justify-end"},pe=["disabled"],he={key:0},fe={key:1},ve={__name:"AutoReplySettings",props:{settings:Object,messages:Array,contactSettings:Object},setup(k){const x=S(),p=k,a=A({is_enabled:p.settings.is_enabled||!1,messages:p.messages.length>0?p.messages:[{message:"Welcome! How can we help you today?",include_contact_info:!1,image_path:null,video_path:null},{message:"Hello [user_name]! Thank you for contacting us.",include_contact_info:!1,image_path:null,video_path:null},{message:"Thank you for your message. We will get back to you soon.",include_contact_info:!1,image_path:null,video_path:null}]}),C=()=>{a.messages.push({message:"",include_contact_info:!1,image_path:null,video_path:null})},j=o=>{a.messages.length>1&&a.messages.splice(o,1)},u=_([]),m=_([]),M=(o,t)=>{const s=t.target.files[0];s&&(a.messages[o].image_file=s,a.messages[o].image_preview=URL.createObjectURL(s))},$=(o,t)=>{const s=t.target.files[0];if(s){if(s.size>30*1024*1024){alert("Video file size must not exceed 30MB."),t.target.value="";return}a.messages[o].video_file=s,a.messages[o].video_preview=URL.createObjectURL(s)}},V=o=>{a.messages[o].image_file=null,a.messages[o].image_preview=null,u.value[o]&&(u.value[o].value="")},U=o=>{a.messages[o].video_file=null,a.messages[o].video_preview=null,m.value[o]&&(m.value[o].value="")},R=()=>{const o=new FormData;o.append("is_enabled",a.is_enabled?"1":"0"),a.messages.forEach((t,s)=>{o.append(`messages[${s}][message]`,t.message),o.append(`messages[${s}][include_contact_info]`,t.include_contact_info?"1":"0"),t.image_file&&o.append(`messages[${s}][image]`,t.image_file),t.video_file&&o.append(`messages[${s}][video]`,t.video_file)}),o.append("_token",x.props.csrf_token),fetch(route("admin.auto-reply.update"),{method:"POST",headers:{Accept:"application/json"},body:o}).then(t=>{if(t.status===419){window.location.reload();return}return t.json()}).then(t=>{t&&t.success?z.visit("/admin/support"):alert("Error saving settings. Please try again.")}).catch(t=>{console.error("Error:",t),alert("Error saving settings. Please try again.")})};return(o,t)=>(d(),r(w,null,[h(i(L),{title:"Auto Reply Settings"}),h(D,null,{default:b(()=>[e("div",F,[e("div",H,[e("div",P,[h(i(B),{href:"/admin/support",class:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-slate-500/80 to-gray-600/80 hover:from-slate-600/90 hover:to-gray-700/90 rounded-xl shadow-lg transition-all duration-200 transform hover:scale-105"},{default:b(()=>[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),t[2]||(t[2]=e("div",null,[e("h1",{class:"text-lg sm:text-xl font-bold text-slate-800 drop-shadow-sm"},"Auto Reply Settings"),e("p",{class:"text-xs sm:text-sm text-slate-600 font-medium"},"Configure automatic reply messages")],-1))])]),e("div",T,[e("form",{onSubmit:E(R,["prevent"]),class:"space-y-6"},[e("div",N,[e("div",W,[f(e("input",{id:"is_enabled","onUpdate:modelValue":t[0]||(t[0]=s=>i(a).is_enabled=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[v,i(a).is_enabled]]),t[3]||(t[3]=e("label",{for:"is_enabled",class:"ml-2 text-sm font-medium text-slate-700"}," Enable Auto Reply ",-1))]),t[4]||(t[4]=e("p",{class:"text-xs text-slate-600"},"When enabled, automatic messages will be sent to users after they send messages.",-1))]),e("div",q,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4"},"Auto Reply Messages",-1)),e("div",G,[(d(!0),r(w,null,I(i(a).messages,(s,l)=>(d(),r("div",{key:l,class:"bg-white/10 rounded-lg p-4 border border-white/20"},[e("div",J,[e("label",K,"Message "+y(l+1),1),i(a).messages.length>1?(d(),r("button",{key:0,type:"button",onClick:n=>j(l),class:"text-xs bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded"}," Remove ",8,Q)):g("",!0)]),e("div",X,[e("input",{type:"file",ref_for:!0,ref:n=>u.value[l]=n,class:"hidden",onChange:n=>M(l,n),accept:"image/*"},null,40,Y),e("button",{type:"button",onClick:n=>{var c;return(c=u.value[l])==null?void 0:c.click()},class:"p-2 bg-white/50 backdrop-blur-sm rounded-full shadow-md focus:outline-none border border-white/30 hover:bg-white/70 transition-all",title:"Upload Image for Message "+(l+1)},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])],8,Z),e("input",{type:"file",ref_for:!0,ref:n=>m.value[l]=n,class:"hidden",onChange:n=>$(l,n),accept:"video/mp4,video/x-mkv"},null,40,ee),e("button",{type:"button",onClick:n=>{var c;return(c=m.value[l])==null?void 0:c.click()},class:"p-2 bg-white/50 backdrop-blur-sm rounded-full shadow-md focus:outline-none border border-white/30 hover:bg-white/70 transition-all",title:"Upload Video for Message "+(l+1)},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])],8,te)]),s.image_preview||s.image_path?(d(),r("div",se,[e("img",{src:s.image_preview||(s.image_path?`/storage/${s.image_path}`:""),alt:"Message image",class:"w-20 h-20 object-cover rounded cursor-pointer"},null,8,oe),e("button",{onClick:n=>V(l),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"}," × ",8,ae)])):g("",!0),s.video_preview||s.video_path?(d(),r("div",le,[e("video",{src:s.video_preview||(s.video_path?`/storage/${s.video_path}`:""),class:"w-20 h-20 object-cover rounded cursor-pointer",controls:""},null,8,ne),e("button",{onClick:n=>U(l),class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs"}," × ",8,ie)])):g("",!0),f(e("textarea",{"onUpdate:modelValue":n=>s.message=n,rows:"3",class:"w-full rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 py-2 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:`Enter auto reply message ${l+1}...`,required:""},null,8,re),[[O,s.message]]),i(a).errors[`messages.${l}.message`]?(d(),r("div",de,y(i(a).errors[`messages.${l}.message`]),1)):g("",!0),e("div",ce,[f(e("input",{id:`include_contact_info_${l}`,"onUpdate:modelValue":n=>s.include_contact_info=n,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,ue),[[v,s.include_contact_info]]),e("label",{for:`include_contact_info_${l}`,class:"ml-2 text-sm font-medium text-slate-700"}," Include contact information with this message ",8,me)])]))),128))]),e("button",{type:"button",onClick:C,class:"mt-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg transform hover:scale-105"}," Add Message ")]),e("div",ge,[e("button",{type:"submit",disabled:i(a).processing,class:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg transform hover:scale-105 disabled:opacity-50"},[i(a).processing?(d(),r("span",he,"Saving...")):(d(),r("span",fe,"Save Settings"))],8,pe)])],32)])])]),_:1})],64))}};export{ve as default};
