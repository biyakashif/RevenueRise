import{u as $,r as m,G as E,c as F,A as L,n as w,p as W,w as T,e,a as n,k as i,b as G,T as q,o as d,z as H,t as a,i as u,d as B,m as b,F as J,j as K,g as Q,y as X,x as S}from"./app-DAygwsjv.js";import{_ as Y}from"./AdminLayout-DolgAX2R.js";import{l as Z}from"./lodash-cLwYVTSs.js";const ee={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-4 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},te={class:"mb-4 flex gap-3"},se={class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},le={class:"overflow-x-auto"},oe={class:"w-full"},re={class:"divide-y divide-white/10"},ae={class:"px-2 py-2 text-xs font-medium text-slate-800"},de={class:"px-2 py-2 text-xs text-slate-700"},ne={class:"px-2 py-2 text-xs text-slate-700"},ie={class:"px-2 py-2 text-xs text-slate-700"},ue={class:"px-2 py-2 text-xs text-slate-700"},be={class:"px-2 py-2 text-xs text-slate-700"},ce={class:"px-2 py-2 text-xs text-slate-700"},pe={class:"px-2 py-2 text-xs text-slate-700"},me={class:"px-2 py-2 text-xs text-slate-700"},xe={class:"px-2 py-2 text-xs text-slate-700"},fe={class:"px-2 py-2 text-xs"},we=["onClick"],he=["onClick"],ve={key:0,class:"text-center text-slate-600 text-sm mt-4"},ge={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto border border-white/20"},ke={class:"text-lg font-bold mb-4 text-slate-800"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={key:0,class:"text-xs text-red-600 mt-1"},Ce={key:0,class:"text-xs text-red-600 mt-1"},Ve={key:0,class:"text-xs text-red-600 mt-1"},Me={key:0,class:"text-xs text-red-600 mt-1"},Ee={key:0,class:"text-xs text-red-600 mt-1"},Te={key:0,class:"text-xs text-red-600 mt-1"},Be={key:0,class:"text-xs text-red-600 mt-1"},Se={key:0,class:"text-xs text-red-600 mt-1"},je={key:0,class:"text-xs text-red-600 mt-1"},De={key:0,class:"text-xs text-red-600 mt-1"},Pe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ae={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-md border border-white/20"},Ne={class:"mt-2 text-sm text-slate-700"},Ie={class:"font-medium text-slate-800"},ze={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Oe={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-md border border-white/20"},Le={__name:"Users",props:{users:Array,search:String},setup(j){const c=$(),h=j,v=m(h.search),g=m(!1),y=m(!1),k=m(!1),f=m(null),_=m(5),l=E({id:null,name:"",mobile_number:"",password:"",withdraw_password:"",invitation_code:"",balance:0,role:"user",referred_by:"",vip_level:"",referral_percentage:5}),o=E({}),p=m(""),x=m(""),D=F(()=>({"bg-green-100 border-green-500 text-green-700":x.value==="success","bg-red-100 border-red-500 text-red-700":x.value==="error"}));L(()=>c.props.flash,r=>{r.success?(p.value=r.success,x.value="success"):r.error?(p.value=r.error,x.value="error"):(p.value="",x.value=""),p.value&&setTimeout(()=>{p.value="",c.props.flash.success&&(c.props.flash.success=null),c.props.flash.error&&(c.props.flash.error=null)},2e3)},{deep:!0});const U=Z.debounce(()=>{w.get(route("admin.users"),{search:v.value},{preserveState:!0,replace:!0})},300),P=r=>{Object.assign(l,r),l.password="",l.withdraw_password="",Object.keys(o).forEach(t=>delete o[t]),g.value=!0},C=()=>{g.value=!1},A=()=>{Object.keys(o).forEach(r=>delete o[r]),w.patch(route("admin.users.update",l.id),{...l,_token:c.props.csrf_token},{preserveScroll:!0,onSuccess:()=>C(),onError:r=>{var t;if(r&&((t=r.message)!=null&&t.includes("419")||r.status===419)){window.location.reload();return}Object.assign(o,r)}})},N=r=>{f.value=r,y.value=!0},V=()=>{f.value=null,y.value=!1},I=()=>{f.value&&w.delete(route("admin.users.destroy",f.value.id),{data:{_token:c.props.csrf_token},preserveScroll:!0,onSuccess:()=>V(),onError:r=>{var t;r&&((t=r.message)!=null&&t.includes("419")||r.status===419)&&window.location.reload()}})},z=()=>{k.value=!0},M=()=>{k.value=!1},O=()=>{w.post(route("admin.users.bulk-update-percentage"),{percentage:_.value,_token:c.props.csrf_token},{preserveScroll:!0,onSuccess:()=>{M(),p.value="Task percentage updated for all users!",x.value="success"},onError:r=>{var t;r&&((t=r.message)!=null&&t.includes("419")||r.status===419)&&window.location.reload()}})};return(r,t)=>(d(),W(Y,null,{default:T(()=>[e("div",ee,[t[14]||(t[14]=e("h2",{class:"text-lg font-bold text-slate-800 drop-shadow-sm mb-4"},"User Management",-1)),G(q,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:T(()=>[p.value?(d(),n("div",{key:0,class:H([D.value,"border-l-4 p-4 mb-4"]),role:"alert"},[e("p",null,a(p.value),1)],2)):i("",!0)]),_:1}),e("div",te,[u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),onInput:t[1]||(t[1]=(...s)=>B(U)&&B(U)(...s)),type:"text",placeholder:"Search by name, mobile, invitation code, or VIP level...",class:"flex-1 h-12 rounded-xl bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-4 placeholder-slate-400 backdrop-blur-sm shadow-lg"},null,544),[[b,v.value]]),e("button",{onClick:z,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl text-sm font-medium hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200 shadow-lg whitespace-nowrap"}," Update Task % ")]),e("div",se,[e("div",le,[e("table",oe,[t[13]||(t[13]=e("thead",null,[e("tr",{class:"bg-white/20 text-slate-700 text-xs font-medium"},[e("th",{class:"px-2 py-2 text-left"},"Name"),e("th",{class:"px-2 py-2 text-left"},"Mobile"),e("th",{class:"px-2 py-2 text-left"},"VIP"),e("th",{class:"px-2 py-2 text-left"},"Balance"),e("th",{class:"px-2 py-2 text-left"},"Pass"),e("th",{class:"px-2 py-2 text-left"},"W.Pass"),e("th",{class:"px-2 py-2 text-left"},"Inv.Code"),e("th",{class:"px-2 py-2 text-left"},"Ref.By"),e("th",{class:"px-2 py-2 text-left"},"Tasks %"),e("th",{class:"px-2 py-2 text-left"},"Date"),e("th",{class:"px-2 py-2 text-left"},"Actions")])],-1)),e("tbody",re,[(d(!0),n(J,null,K(h.users,s=>(d(),n("tr",{key:s.id,class:"hover:bg-white/10 transition-all duration-200"},[e("td",ae,a(s.name),1),e("td",de,a(s.mobile_number),1),e("td",ne,a(s.vip_level),1),e("td",ie,"$"+a(s.balance.toFixed(2)),1),e("td",ue,a(s.password),1),e("td",be,a(s.withdraw_password),1),e("td",ce,a(s.invitation_code||"N/A"),1),e("td",pe,a(s.referred_by||"N/A"),1),e("td",me,a(s.referral_percentage||5)+"%",1),e("td",xe,a(s.register_date),1),e("td",fe,[e("button",{onClick:R=>P(s),class:"text-blue-600 hover:text-blue-700 mr-2 text-xs"},"Edit",8,we),e("button",{onClick:R=>N(s),class:"text-red-600 hover:text-red-700 text-xs"},"Del",8,he)])]))),128))])])])]),h.users.length?i("",!0):(d(),n("p",ve,"No users found."))]),g.value?(d(),n("div",ge,[e("div",ye,[e("h3",ke,"Edit User: "+a(l.name),1),e("form",{onSubmit:Q(A,["prevent"])},[e("div",_e,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-xs font-medium text-slate-700 mb-1"},"Name",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.name=s),type:"text",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg text-sm"},null,512),[[b,l.name]]),o.name?(d(),n("p",Ue,a(o.name),1)):i("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-white/80"},"Mobile Number",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.mobile_number=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.mobile_number]]),o.mobile_number?(d(),n("p",Ce,a(o.mobile_number),1)):i("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-white/80"},"Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.password]]),o.password?(d(),n("p",Ve,a(o.password),1)):i("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-white/80"},"Withdraw Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.withdraw_password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.withdraw_password]]),o.withdraw_password?(d(),n("p",Me,a(o.withdraw_password),1)):i("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-white/80"},"Invitation Code",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.invitation_code=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.invitation_code]]),o.invitation_code?(d(),n("p",Ee,a(o.invitation_code),1)):i("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-white/80"},"Balance",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.balance=s),type:"number",step:"0.01",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.balance]]),o.balance?(d(),n("p",Te,a(o.balance),1)):i("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-white/80"},"Role",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.role=s),class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[21]||(t[21]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[X,l.role]]),o.role?(d(),n("p",Be,a(o.role),1)):i("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-white/80"},"Referred By (Invitation Code)",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.referred_by=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.referred_by]]),o.referred_by?(d(),n("p",Se,a(o.referred_by),1)):i("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-white/80"},"VIP Level",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.vip_level=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.vip_level]]),o.vip_level?(d(),n("p",je,a(o.vip_level),1)):i("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-white/80"},"Referral Percentage (%)",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.referral_percentage=s),type:"number",step:"0.01",min:"0",max:"100",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[b,l.referral_percentage]]),o.referral_percentage?(d(),n("p",De,a(o.referral_percentage),1)):i("",!0)])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{type:"button",onClick:C,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),t[26]||(t[26]=e("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"},"Update User",-1))])],32)])])):i("",!0),y.value?(d(),n("div",Pe,[e("div",Ae,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-slate-800"},"Confirm Deletion",-1)),e("p",Ne,[t[27]||(t[27]=S(" Are you sure you want to delete the user ",-1)),e("span",Ie,a(f.value.name),1),t[28]||(t[28]=S("? This action cannot be undone. ",-1))]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:V,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),e("button",{onClick:I,class:"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-md hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200"},"Delete User")])])])):i("",!0),k.value?(d(),n("div",ze,[e("div",Oe,[t[31]||(t[31]=e("h3",{class:"text-lg font-bold text-slate-800 mb-4"},"Update Task % for All Users",-1)),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Task Percentage (%)",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>_.value=s),type:"number",step:"0.01",min:"0",max:"100",class:"w-full h-12 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-4 backdrop-blur-sm shadow-lg"},null,512),[[b,_.value]])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:M,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),e("button",{onClick:O,class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"},"Apply to All")])])])):i("",!0)]),_:1}))}};export{Le as default};
