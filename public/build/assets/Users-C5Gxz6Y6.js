import{u as P,r as c,G as C,c as I,z,n as g,p as O,w as V,e,a as d,k as n,b as R,T as $,o as a,y as F,t as r,i as u,d as M,m,F as L,j as W,g as G,x as q,A as D}from"./app-CdvAI5iq.js";import{_ as H}from"./AdminLayout-DZFzOaKL.js";import{l as J}from"./lodash-DopFoQT1.js";const K={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-4 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},Q={class:"mb-4"},X={class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},Y={class:"overflow-x-auto"},Z={class:"w-full"},ee={class:"divide-y divide-white/10"},te={class:"px-4 py-3 text-sm font-medium text-slate-800"},se={class:"px-4 py-3 text-sm text-slate-700"},oe={class:"px-4 py-3 text-sm text-slate-700"},le={class:"px-4 py-3 text-sm text-slate-700"},re={class:"px-4 py-3 text-sm text-slate-700"},ae={class:"px-4 py-3 text-sm text-slate-700"},de={class:"px-4 py-3 text-sm text-slate-700"},ie={class:"px-4 py-3 text-sm text-slate-700"},ne={class:"px-4 py-3 text-sm text-slate-700"},ue={class:"px-4 py-3 text-sm"},me=["onClick"],be=["onClick"],ce={key:0,class:"text-center text-slate-600 text-sm mt-4"},pe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},xe={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto border border-white/20"},we={class:"text-lg font-bold mb-4 text-slate-800"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={key:0,class:"text-xs text-red-600 mt-1"},ve={key:0,class:"text-xs text-red-600 mt-1"},ye={key:0,class:"text-xs text-red-600 mt-1"},ge={key:0,class:"text-xs text-red-600 mt-1"},ke={key:0,class:"text-xs text-red-600 mt-1"},_e={key:0,class:"text-xs text-red-600 mt-1"},Ue={key:0,class:"text-xs text-red-600 mt-1"},Ce={key:0,class:"text-xs text-red-600 mt-1"},Ve={key:0,class:"text-xs text-red-600 mt-1"},Me={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},De={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-6 rounded-lg shadow-xl w-full max-w-md border border-white/20"},Ee={class:"mt-2 text-sm text-slate-700"},Ne={class:"font-medium text-slate-800"},Te={__name:"Users",props:{users:Array,search:String},setup(E){const p=P(),h=E,f=c(h.search),v=c(!1),y=c(!1),x=c(null),o=C({id:null,name:"",mobile_number:"",password:"",withdraw_password:"",invitation_code:"",balance:0,role:"user",referred_by:"",vip_level:""}),l=C({}),b=c(""),w=c(""),N=I(()=>({"bg-green-100 border-green-500 text-green-700":w.value==="success","bg-red-100 border-red-500 text-red-700":w.value==="error"}));z(()=>p.props.flash,i=>{i.success?(b.value=i.success,w.value="success"):i.error?(b.value=i.error,w.value="error"):(b.value="",w.value=""),b.value&&setTimeout(()=>{b.value="",p.props.flash.success&&(p.props.flash.success=null),p.props.flash.error&&(p.props.flash.error=null)},2e3)},{deep:!0});const k=J.debounce(()=>{g.get(route("admin.users"),{search:f.value},{preserveState:!0,replace:!0})},300),S=i=>{Object.assign(o,i),o.password="",o.withdraw_password="",Object.keys(l).forEach(t=>delete l[t]),v.value=!0},_=()=>{v.value=!1},j=()=>{Object.keys(l).forEach(i=>delete l[i]),g.patch(route("admin.users.update",o.id),o,{preserveScroll:!0,onSuccess:()=>_(),onError:i=>Object.assign(l,i)})},B=i=>{x.value=i,y.value=!0},U=()=>{x.value=null,y.value=!1},T=()=>{x.value&&g.delete(route("admin.users.destroy",x.value.id),{preserveScroll:!0,onSuccess:()=>U()})};return(i,t)=>(a(),O(H,null,{default:V(()=>[e("div",K,[t[12]||(t[12]=e("h2",{class:"text-lg font-bold text-slate-800 drop-shadow-sm mb-4"},"User Management",-1)),R($,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:V(()=>[b.value?(a(),d("div",{key:0,class:F([N.value,"border-l-4 p-4 mb-4"]),role:"alert"},[e("p",null,r(b.value),1)],2)):n("",!0)]),_:1}),e("div",Q,[u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),onInput:t[1]||(t[1]=(...s)=>M(k)&&M(k)(...s)),type:"text",placeholder:"Search by name, mobile, or invitation code...",class:"w-full h-12 rounded-xl bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-4 placeholder-slate-400 backdrop-blur-sm shadow-lg"},null,544),[[m,f.value]])]),e("div",X,[e("div",Y,[e("table",Z,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"bg-white/20 text-slate-700 text-xs font-medium"},[e("th",{class:"px-4 py-3 text-left"},"Name"),e("th",{class:"px-4 py-3 text-left"},"Mobile"),e("th",{class:"px-4 py-3 text-left"},"VIP Level"),e("th",{class:"px-4 py-3 text-left"},"Balance"),e("th",{class:"px-4 py-3 text-left"},"Password"),e("th",{class:"px-4 py-3 text-left"},"Withdraw Password"),e("th",{class:"px-4 py-3 text-left"},"Invitation Code"),e("th",{class:"px-4 py-3 text-left"},"Referred By"),e("th",{class:"px-4 py-3 text-left"},"Register Date"),e("th",{class:"px-4 py-3 text-left"},"Actions")])],-1)),e("tbody",ee,[(a(!0),d(L,null,W(h.users,s=>(a(),d("tr",{key:s.id,class:"hover:bg-white/10 transition-all duration-200"},[e("td",te,r(s.name),1),e("td",se,r(s.mobile_number),1),e("td",oe,r(s.vip_level),1),e("td",le,"$"+r(s.balance.toFixed(2)),1),e("td",re,r(s.password),1),e("td",ae,r(s.withdraw_password),1),e("td",de,r(s.invitation_code||"N/A"),1),e("td",ie,r(s.referred_by||"N/A"),1),e("td",ne,r(s.register_date),1),e("td",ue,[e("button",{onClick:A=>S(s),class:"text-blue-600 hover:text-blue-700 mr-3 text-xs"},"Edit",8,me),e("button",{onClick:A=>B(s),class:"text-red-600 hover:text-red-700 text-xs"},"Delete",8,be)])]))),128))])])])]),h.users.length?n("",!0):(a(),d("p",ce,"No users found."))]),v.value?(a(),d("div",pe,[e("div",xe,[e("h3",we,"Edit User: "+r(o.name),1),e("form",{onSubmit:G(j,["prevent"])},[e("div",he,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-xs font-medium text-slate-700 mb-1"},"Name",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.name=s),type:"text",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg text-sm"},null,512),[[m,o.name]]),l.name?(a(),d("p",fe,r(l.name),1)):n("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-white/80"},"Mobile Number",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.mobile_number=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.mobile_number]]),l.mobile_number?(a(),d("p",ve,r(l.mobile_number),1)):n("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-white/80"},"Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.password]]),l.password?(a(),d("p",ye,r(l.password),1)):n("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-white/80"},"Withdraw Password (leave blank to keep unchanged)",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.withdraw_password=s),type:"password",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.withdraw_password]]),l.withdraw_password?(a(),d("p",ge,r(l.withdraw_password),1)):n("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-white/80"},"Invitation Code",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.invitation_code=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.invitation_code]]),l.invitation_code?(a(),d("p",ke,r(l.invitation_code),1)):n("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-white/80"},"Balance",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.balance=s),type:"number",step:"0.01",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.balance]]),l.balance?(a(),d("p",_e,r(l.balance),1)):n("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-white/80"},"Role",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.role=s),class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[19]||(t[19]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[q,o.role]]),l.role?(a(),d("p",Ue,r(l.role),1)):n("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-white/80"},"Referred By (Invitation Code)",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.referred_by=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.referred_by]]),l.referred_by?(a(),d("p",Ce,r(l.referred_by),1)):n("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-white/80"},"VIP Level",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.vip_level=s),type:"text",class:"mt-1 block w-full rounded-md bg-white/10 backdrop-blur-sm border-white/20 text-white placeholder-white/70 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.vip_level]]),l.vip_level?(a(),d("p",Ve,r(l.vip_level),1)):n("",!0)])]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{type:"button",onClick:_,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),t[23]||(t[23]=e("button",{type:"submit",class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"},"Update User",-1))])],32)])])):n("",!0),y.value?(a(),d("div",Me,[e("div",De,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-slate-800"},"Confirm Deletion",-1)),e("p",Ee,[t[24]||(t[24]=D(" Are you sure you want to delete the user ",-1)),e("span",Ne,r(x.value.name),1),t[25]||(t[25]=D("? This action cannot be undone. ",-1))]),e("div",{class:"mt-6 flex justify-end space-x-3"},[e("button",{onClick:U,class:"bg-white/10 backdrop-blur-sm text-white px-4 py-2 rounded-md hover:bg-white/20 border border-white/20"},"Cancel"),e("button",{onClick:T,class:"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-md hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200"},"Delete User")])])])):n("",!0)]),_:1}))}};export{Te as default};
