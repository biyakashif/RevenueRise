import{u as F,c as b,r as m,a as h,o as i,e,b as p,w as y,d as j,l as S,t as r,k as E,F as T,j as q,T as z,n as G,J as B,x as L,z as R,p as D,g as M,i as C,m as $,D as V}from"./app-DxfmXC0O.js";import{_ as P,a as U,b as X}from"./GuestChatInterface-CoR-KYt8.js";const A={class:"bg-white/10 backdrop-blur-md border-b border-white/20 shadow-lg relative z-50"},H={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},O={class:"flex flex-row justify-between items-center h-16"},Y={class:"relative"},J=["src"],K={class:"text-xs"},W={key:0,class:"absolute left-0 mt-2 w-32 sm:w-40 z-50 bg-gradient-to-br from-cyan-400/90 via-blue-500/80 to-indigo-600/90 rounded-xl shadow-xl border border-cyan-300/40 py-1 px-1",style:{"min-width":"7rem"}},Q=["onClick"],Z=["src","alt"],ee={class:"text-xs"},te={__name:"Header",setup(N){const f=F(),_=b(()=>f.props.translations||{}),k=b(()=>f.props.auth||{}),s=b(()=>f.props.locale||"en"),d=[{code:"en",name:"English",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/gb.svg"},{code:"es",name:"Español",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/es.svg"},{code:"it",name:"Italiano",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/it.svg"},{code:"ro",name:"Română",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/ro.svg"},{code:"ru",name:"Русский",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/ru.svg"},{code:"de",name:"Deutsch",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/de.svg"},{code:"bn",name:"বাংলা",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/bd.svg"},{code:"hi",name:"हिन्दी",flag:"https://cdn.jsdelivr.net/npm/flag-icons@6.11.0/flags/4x3/in.svg"}],v=b(()=>d.find(a=>a.code===s.value)||d[0]),t=m(!1),w=async()=>{const l=(await(await fetch(route("csrf-token"),{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"})).json()).token;document.head.querySelector('meta[name="csrf-token"]').content=l,window.axios.defaults.headers.common["X-CSRF-TOKEN"]=l},x=async a=>{try{await w(),await G.post(route("locale.change"),{locale:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{t.value=!1}})}catch(n){n.response&&n.response.status===419?window.location.reload():console.error("Failed to change language:",n)}},u=a=>_.value[a]||a;return(a,n)=>(i(),h("header",A,[e("div",H,[e("div",O,[p(j(S),{href:k.value.user?a.route("dashboard"):a.route("welcome")},{default:y(()=>[p(P,{class:"block h-9 w-auto fill-current text-white"})]),_:1},8,["href"]),e("div",Y,[e("button",{onClick:n[0]||(n[0]=l=>t.value=!t.value),class:"flex items-center px-2 py-1 rounded-lg bg-gradient-to-r from-cyan-400/30 via-blue-500/20 to-indigo-600/30 text-xs text-white font-medium shadow-sm border border-cyan-300/30 focus:outline-none"},[e("img",{src:v.value.flag,alt:"Lang",class:"w-4 h-4 mr-1 rounded-full"},null,8,J),e("span",K,r(u("Language")),1),n[1]||(n[1]=e("svg",{class:"ml-1 w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),p(z,{name:"fade"},{default:y(()=>[t.value?(i(),h("div",W,[(i(),h(T,null,q(d,l=>e("div",{key:l.code,onClick:I=>x(l.code),class:"flex items-center gap-2 px-2 py-1 rounded-lg cursor-pointer hover:bg-cyan-400/30 transition-all text-xs text-white font-medium"},[e("img",{src:l.flag,alt:l.name,class:"w-3 h-3 rounded-full"},null,8,Z),e("span",ee,r(l.name),1)],8,Q)),64))])):E("",!0)]),_:1})])])])]))}},se={class:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900"},ae={class:"flex flex-col justify-center items-center p-4 min-h-[calc(100vh-64px)]"},oe={class:"w-full max-w-md"},le={class:"bg-white/10 backdrop-blur-md rounded-t-2xl p-1 border border-white/20 border-b-0"},ne={class:"flex items-center justify-between"},re={class:"flex-1 flex"},ce={key:0,class:"fixed inset-0 bg-black/50 z-50"},ie={key:0,class:"flex items-center justify-center h-full p-4"},de={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md"},ue={class:"flex items-center justify-between p-4 border-b"},me={class:"text-lg font-semibold text-gray-800"},he={class:"p-6"},pe={class:"block text-sm font-medium text-gray-700 mb-1"},fe=["placeholder"],ge={class:"block text-sm font-medium text-gray-700 mb-1"},be=["placeholder"],ve={class:"block text-sm font-medium text-gray-700 mb-1"},xe={class:"flex items-center space-x-2 mb-2"},_e=["src"],we=["placeholder"],ye={key:0,class:"text-red-500 text-sm mt-1"},ke={type:"submit",class:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-2 px-4 rounded-lg transition-all duration-200"},je={__name:"GuestLayout",setup(N){const f=F(),_=b(()=>f.url),k=b(()=>f.props.translations||{}),s=c=>k.value[c]||c,d=m(!1),v=m(!0),t=m({name:"",mobile_number:"",captcha:""}),w=m(""),x=m(null),u=m(""),a=()=>{w.value=`/captcha?${Date.now()}`},n=()=>{d.value=!0,a()},l=()=>{d.value=!1,v.value=!0,t.value={name:"",mobile_number:"",captcha:""},x.value=null},I=async()=>{try{if(!(await V.post("/captcha/verify",{captcha:t.value.captcha})).data.valid){u.value=s("Incorrect captcha. Please try again."),a(),t.value.captcha="";return}u.value="";const o=await V.post("/guest-chat/start",{name:t.value.name,mobile_number:t.value.mobile_number});if(o.data.blocked){u.value=s("You have been blocked. You cannot send messages.");return}x.value=o.data.session_id,v.value=!1}catch{alert(s("Error starting chat. Please try again."))}};return(c,o)=>(i(),h("div",se,[p(te,{class:"relative z-50"}),e("div",ae,[e("div",oe,[e("div",le,[e("div",ne,[e("div",re,[p(j(S),{href:c.route("register"),class:R(["flex-1 text-center py-3 px-4 rounded-t-xl text-sm font-semibold transition-all duration-300",_.value.includes("/register")?"bg-white text-blue-900 shadow-lg":"text-white/80 hover:text-white hover:bg-white/10"])},{default:y(()=>[L(r(s("Create Account")),1)]),_:1},8,["href","class"]),p(j(S),{href:c.route("login"),class:R(["flex-1 text-center py-3 px-4 rounded-t-xl text-sm font-semibold transition-all duration-300",_.value.includes("/login")?"bg-white text-blue-900 shadow-lg":"text-white/80 hover:text-white hover:bg-white/10"])},{default:y(()=>[L(r(s("Login")),1)]),_:1},8,["href","class"])])])])]),B(c.$slots,"default")]),p(U,{onClick:n}),d.value?(i(),h("div",ce,[v.value?(i(),h("div",ie,[e("div",de,[e("div",ue,[e("h3",me,r(s("Contact Support")),1),e("button",{onClick:l,class:"text-gray-400 hover:text-gray-600"},[...o[4]||(o[4]=[e("i",{class:"fas fa-times text-xl"},null,-1)])])]),e("div",he,[e("form",{onSubmit:M(I,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",pe,r(s("Name")),1),C(e("input",{"onUpdate:modelValue":o[0]||(o[0]=g=>t.value.name=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:s("Enter your name")},null,8,fe),[[$,t.value.name]])]),e("div",null,[e("label",ge,r(s("Mobile Number")),1),C(e("input",{"onUpdate:modelValue":o[1]||(o[1]=g=>t.value.mobile_number=g),type:"tel",required:"",pattern:"[0-9+\\-\\s]*",onInput:o[2]||(o[2]=g=>t.value.mobile_number=t.value.mobile_number.replace(/[^0-9+\-\s]/g,"")),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:s("Enter your mobile number")},null,40,be),[[$,t.value.mobile_number]])]),e("div",null,[e("label",ve,r(s("Verification")),1),e("div",xe,[e("img",{src:w.value,alt:"Captcha",class:"border border-gray-300 rounded",onClick:a,style:{cursor:"pointer"}},null,8,_e),e("button",{type:"button",onClick:a,class:"text-blue-500 hover:text-blue-700 text-sm"}," 🔄 ")]),C(e("input",{"onUpdate:modelValue":o[3]||(o[3]=g=>t.value.captcha=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:s("Enter the code shown above")},null,8,we),[[$,t.value.captcha]]),u.value?(i(),h("div",ye,r(u.value),1)):E("",!0)]),e("button",ke,r(s("Start Chat")),1)],32)])])])):(i(),D(X,{key:1,sessionId:x.value,guestInfo:{name:t.value.name,mobile_number:t.value.mobile_number},onClose:l},null,8,["sessionId","guestInfo"]))])):E("",!0)]))}};export{je as _};
