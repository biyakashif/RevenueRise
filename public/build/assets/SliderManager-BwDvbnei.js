import{u as re,r as n,q as de,n as R,p as ue,w as ce,e as t,a as h,k as $,o as c,F as G,j as N,y as q,t as g,g as J,i as K,m as Q,A as H,B as ve}from"./app-D6hQSsMw.js";import{_ as he}from"./AdminLayout-DLZ9ec3C.js";const ge={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl p-4 rounded-2xl shadow-2xl border border-cyan-300/30 h-full overflow-y-auto"},me={class:"mb-8"},be={class:"flex justify-between items-center mb-4"},pe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},fe={class:"aspect-video bg-white/20 relative"},xe=["src","alt"],we={class:"absolute top-2 right-2"},ye=["onClick"],_e={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},ke={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},Ce={class:"p-4"},Me={class:"font-medium text-gray-900"},Ie={class:"text-sm text-gray-500"},De={class:"mt-3 flex space-x-2"},Se=["onClick"],ze=["onClick"],Be={class:"mb-8"},Re={class:"flex justify-between items-center mb-4"},$e={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},je={class:"aspect-video bg-white/20 relative"},Le=["src","alt"],Ue={class:"absolute top-2 right-2"},Ee=["onClick"],We={key:0,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},Fe={key:1,class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},He={class:"p-4"},Ae={class:"font-medium text-gray-900"},Te={class:"text-sm text-gray-500"},Pe={class:"mt-3 flex space-x-2"},Ve=["onClick"],Oe=["onClick"],Xe={class:"mt-3"},Ye={class:"text-lg font-semibold text-white mb-4"},Ge={class:"mb-4"},Ne={class:"mb-4"},qe=["required"],Je={class:"text-xs text-white/70 mt-1"},Ke={key:0},Qe={key:1},Ze={key:0,class:"mt-2 text-sm text-green-400"},et={class:"mb-4"},tt={class:"flex justify-end space-x-2"},lt=["disabled"],ot={key:1,class:"fixed inset-0 bg-black bg-opacity-75 overflow-y-auto h-full w-full z-50 flex items-center justify-center"},st={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl rounded-2xl p-6 w-full max-w-4xl mx-4 border border-white/20"},at={class:"text-lg font-semibold text-white mb-4"},it={class:"bg-white/10 rounded-lg p-4 mb-4"},nt={class:"text-sm text-white/80 mb-4"},rt={key:2,class:"fixed inset-0 bg-black bg-opacity-40 overflow-y-auto h-full w-full z-50 flex items-center justify-center"},dt={class:"bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl rounded-2xl p-6 w-full max-w-sm mx-4 border border-white/20"},ut={class:"text-center"},ct={class:"text-white/80 mb-4"},vt={class:"flex space-x-2"},ht=["disabled"],pt={__name:"SliderManager",setup(gt){const j=re(),A=n([]),T=n([]),I=n(!1),b=n("desktop"),p=n(!1),L=n(null),f=n(!1),v=n({title:"",image:null,sort_order:0}),k=n(null),C=n(!1),x=n(null),D=n(null),S=n(null),o=n({x:0,y:0,width:0,height:0}),U=n(!1),E=n({x:0,y:0}),y=n(!1),_=n(""),z=n(!1),M=n(null);de(()=>{B()});const B=()=>{R.reload({onSuccess:s=>{A.value=s.props.desktopImages||[],T.value=s.props.mobileImages||[]}})},P=s=>{b.value=s,p.value=!1,L.value=null,v.value={title:"",image:null,sort_order:0},I.value=!0},V=s=>{b.value=s.type,p.value=!0,L.value=s,v.value={title:s.title||"",sort_order:s.sort_order||0},I.value=!0},W=()=>{I.value=!1,C.value=!1,v.value={title:"",image:null,sort_order:0},k.value&&(k.value.value="")},Z=s=>{const e=s.target.files[0];if(e){S.value=e;const a=new FileReader;a.onload=l=>{D.value=l.target.result,C.value=!0,ve(()=>{ee()})},a.readAsDataURL(e)}},ee=()=>{const s=new Image;s.onload=()=>{const e=x.value,a=e.getContext("2d"),i=e.parentElement.clientWidth-40,d=400;let r=s.width,u=s.height;if(r>i&&(u=u*i/r,r=i),u>d&&(r=r*d/u,u=d),e.width=r,e.height=u,a.drawImage(s,0,0,r,u),b.value==="mobile"){const m=Math.min(r*.8,u*2),w=m/2;o.value={x:(r-m)/2,y:(u-w)/2,width:m,height:w}}else{const m=Math.min(r*.8,u*5/2),w=m*2/5;o.value={x:(r-m)/2,y:(u-w)/2,width:m,height:w}}F()},s.src=D.value},F=()=>{const s=x.value,e=s.getContext("2d"),a=new Image;a.onload=()=>{e.clearRect(0,0,s.width,s.height),e.drawImage(a,0,0,s.width,s.height),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,s.width,s.height),e.clearRect(o.value.x,o.value.y,o.value.width,o.value.height),e.drawImage(a,o.value.x*(a.width/s.width),o.value.y*(a.height/s.height),o.value.width*(a.width/s.width),o.value.height*(a.height/s.height),o.value.x,o.value.y,o.value.width,o.value.height),e.strokeStyle="#3b82f6",e.lineWidth=2,e.strokeRect(o.value.x,o.value.y,o.value.width,o.value.height);const l=8;e.fillStyle="#3b82f6",e.fillRect(o.value.x-l/2,o.value.y-l/2,l,l),e.fillRect(o.value.x+o.value.width-l/2,o.value.y-l/2,l,l),e.fillRect(o.value.x-l/2,o.value.y+o.value.height-l/2,l,l),e.fillRect(o.value.x+o.value.width-l/2,o.value.y+o.value.height-l/2,l,l)},a.src=D.value},te=s=>{const a=x.value.getBoundingClientRect(),l=s.clientX-a.left,i=s.clientY-a.top,d=8;Math.abs(l-o.value.x)<d&&Math.abs(i-o.value.y)<d?(y.value=!0,_.value="nw"):Math.abs(l-(o.value.x+o.value.width))<d&&Math.abs(i-o.value.y)<d?(y.value=!0,_.value="ne"):Math.abs(l-o.value.x)<d&&Math.abs(i-(o.value.y+o.value.height))<d?(y.value=!0,_.value="sw"):Math.abs(l-(o.value.x+o.value.width))<d&&Math.abs(i-(o.value.y+o.value.height))<d?(y.value=!0,_.value="se"):l>=o.value.x&&l<=o.value.x+o.value.width&&i>=o.value.y&&i<=o.value.y+o.value.height&&(U.value=!0,E.value={x:l-o.value.x,y:i-o.value.y})},le=s=>{const e=x.value,a=e.getBoundingClientRect(),l=s.clientX-a.left,i=s.clientY-a.top;if(U.value){const d=Math.max(0,Math.min(l-E.value.x,e.width-o.value.width)),r=Math.max(0,Math.min(i-E.value.y,e.height-o.value.height));o.value.x=d,o.value.y=r,F()}else if(y.value){const d=b.value==="mobile"?.5:.4;if(_.value==="se"){const r=Math.max(50,l-o.value.x),u=r*d;o.value.x+r<=e.width&&o.value.y+u<=e.height&&(o.value.width=r,o.value.height=u)}F()}},O=()=>{U.value=!1,y.value=!1,_.value=""},oe=()=>{const s=document.createElement("canvas"),e=s.getContext("2d"),a=new Image;a.onload=()=>{const l=a.width/x.value.width,i=a.height/x.value.height,d=o.value.x*l,r=o.value.y*i,u=o.value.width*l,m=o.value.height*i;s.width=u,s.height=m,e.drawImage(a,d,r,u,m,0,0,u,m),s.toBlob(w=>{v.value.image=new File([w],S.value.name,{type:S.value.type}),C.value=!1},S.value.type,.9)},a.src=D.value},se=()=>{C.value=!1,v.value.image=null,k.value&&(k.value.value="")},ae=()=>{f.value=!0;const s=new FormData;s.append("title",v.value.title),s.append("type",b.value),s.append("sort_order",v.value.sort_order),s.append("_token",j.props.csrf_token),v.value.image&&s.append("image",v.value.image),p.value&&s.append("_method","PUT");const e=p.value?`/admin/sliders/${L.value.id}`:"/admin/sliders";R.post(e,s,{onSuccess:()=>{f.value=!1,W(),B()},onError:a=>{var l;if(a&&((l=a.message)!=null&&l.includes("419")||a.status===419)){window.location.reload();return}f.value=!1}})},X=s=>{R.post(`/admin/sliders/${s.id}/toggle`,{_token:j.props.csrf_token},{onSuccess:()=>{B()},onError:e=>{var a;e&&((a=e.message)!=null&&a.includes("419")||e.status===419)&&window.location.reload()}})},Y=s=>{M.value=s,z.value=!0},ie=()=>{R.delete(`/admin/sliders/${M.value.id}`,{data:{_token:j.props.csrf_token},onSuccess:()=>{z.value=!1,M.value=null,B()},onError:s=>{var e;s&&((e=s.message)!=null&&e.includes("419")||s.status===419)&&window.location.reload()}})},ne=()=>{z.value=!1,M.value=null};return(s,e)=>(c(),ue(he,null,{default:ce(()=>{var a;return[t("div",ge,[e[20]||(e[20]=t("h1",{class:"text-lg font-bold text-slate-800 drop-shadow-sm mb-4"},"Slider Management",-1)),t("div",me,[t("div",be,[e[5]||(e[5]=t("h2",{class:"text-base font-medium text-slate-800 drop-shadow-sm"},"Desktop Slider Images",-1)),t("button",{onClick:e[0]||(e[0]=l=>P("desktop")),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Add Desktop Image ")]),t("div",pe,[(c(!0),h(G,null,N(A.value,l=>(c(),h("div",{key:l.id,class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},[t("div",fe,[t("img",{src:`/storage/${l.image_path}`,alt:l.title,class:"w-full h-full object-cover"},null,8,xe),t("div",we,[t("button",{onClick:i=>X(l),class:q([l.is_active?"bg-green-500":"bg-gray-400","w-6 h-6 rounded-full flex items-center justify-center text-white text-xs"])},[l.is_active?(c(),h("svg",_e,[...e[6]||(e[6]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(c(),h("svg",ke,[...e[7]||(e[7]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])]))],10,ye)])]),t("div",Ce,[t("h3",Me,g(l.title||"Untitled"),1),t("p",Ie,"Order: "+g(l.sort_order),1),t("div",De,[t("button",{onClick:i=>V(l),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,Se),t("button",{onClick:i=>Y(l),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Delete ",8,ze)])])]))),128))])]),t("div",Be,[t("div",Re,[e[8]||(e[8]=t("h2",{class:"text-base font-medium text-slate-800 drop-shadow-sm"},"Mobile Slider Images",-1)),t("button",{onClick:e[1]||(e[1]=l=>P("mobile")),class:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg text-sm font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl"}," Add Mobile Image ")]),t("div",$e,[(c(!0),h(G,null,N(T.value,l=>(c(),h("div",{key:l.id,class:"bg-gradient-to-r from-white/40 via-white/30 to-white/20 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-white/30"},[t("div",je,[t("img",{src:`/storage/${l.image_path}`,alt:l.title,class:"w-full h-full object-cover"},null,8,Le),t("div",Ue,[t("button",{onClick:i=>X(l),class:q([l.is_active?"bg-green-500":"bg-gray-400","w-6 h-6 rounded-full flex items-center justify-center text-white text-xs"])},[l.is_active?(c(),h("svg",We,[...e[9]||(e[9]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(c(),h("svg",Fe,[...e[10]||(e[10]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])]))],10,Ee)])]),t("div",He,[t("h3",Ae,g(l.title||"Untitled"),1),t("p",Te,"Order: "+g(l.sort_order),1),t("div",Pe,[t("button",{onClick:i=>V(l),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,Ve),t("button",{onClick:i=>Y(l),class:"text-red-600 hover:text-red-800 text-sm font-medium"}," Delete ",8,Oe)])])]))),128))])]),I.value?(c(),h("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-40 overflow-y-auto h-full w-full z-50",onClick:W},[t("div",{class:"relative top-20 mx-auto p-6 w-96 shadow-2xl rounded-lg bg-gradient-to-br from-cyan-400/20 via-blue-500/15 to-indigo-600/20 backdrop-blur-xl border border-white/20",onClick:e[4]||(e[4]=J(()=>{},["stop"]))},[t("div",Xe,[t("h3",Ye,g(p.value?"Edit":"Upload")+" "+g(b.value==="desktop"?"Desktop":"Mobile")+" Image ",1),t("form",{onSubmit:J(ae,["prevent"]),enctype:"multipart/form-data"},[t("div",Ge,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Title (Optional)",-1)),K(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>v.value.title=l),type:"text",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:"Enter image title"},null,512),[[Q,v.value.title]])]),t("div",Ne,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Image Upload ",-1)),t("input",{ref_key:"imageInput",ref:k,onChange:Z,type:"file",accept:"image/*",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-cyan-50 file:text-cyan-700 hover:file:bg-cyan-100",required:!p.value},null,40,qe),t("p",Je,[H(" Max size: "+g(b.value==="desktop"?"2MB":"1MB")+". Formats: JPEG, PNG, JPG, GIF, WebP ",1),b.value==="desktop"?(c(),h("span",Ke," - Desktop version (5:2 ratio)")):(c(),h("span",Qe," - Mobile optimized (2:1 ratio)"))]),v.value.image?(c(),h("div",Ze," ✓ Image cropped and ready ")):$("",!0)]),t("div",et,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-white mb-2"},"Sort Order",-1)),K(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>v.value.sort_order=l),type:"number",min:"0",class:"w-full h-10 rounded-lg bg-white/50 border-0 focus:ring-2 focus:ring-cyan-400 text-slate-900 px-3 placeholder-slate-400 backdrop-blur-sm shadow-lg",placeholder:"0"},null,512),[[Q,v.value.sort_order,void 0,{number:!0}]])]),t("div",tt,[t("button",{type:"button",onClick:W,class:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{type:"submit",disabled:f.value,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded text-sm hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200 disabled:opacity-50"},g(f.value?"Uploading...":p.value?"Update":"Upload"),9,lt)])],32)])])])):$("",!0),C.value?(c(),h("div",ot,[t("div",st,[t("h3",at," Crop Image for "+g(b.value==="desktop"?"Desktop (5:2)":"Mobile (2:1)"),1),t("div",it,[t("canvas",{ref_key:"cropCanvas",ref:x,onMousedown:te,onMousemove:le,onMouseup:O,onMouseleave:O,class:"max-w-full cursor-move border border-white/30 rounded"},null,544)]),t("div",nt,[e[14]||(e[14]=t("p",null,"• Drag the crop area to reposition",-1)),e[15]||(e[15]=t("p",null,"• Drag the corner handles to resize (maintains aspect ratio)",-1)),t("p",null,"• "+g(b.value==="desktop"?"Desktop images use 5:2 aspect ratio":"Mobile images use 2:1 aspect ratio"),1)]),t("div",{class:"flex justify-end space-x-3"},[t("button",{onClick:se,class:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{onClick:oe,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded text-sm hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-200"}," Crop & Continue ")])])])):$("",!0),z.value?(c(),h("div",rt,[t("div",dt,[t("div",ut,[e[18]||(e[18]=t("div",{class:"w-12 h-12 mx-auto mb-4 bg-red-100/20 rounded-full flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1)),e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-white mb-2"},"Delete Image",-1)),t("p",ct,[e[16]||(e[16]=H("Are you sure you want to delete ",-1)),t("strong",null,g(((a=M.value)==null?void 0:a.title)||"this image"),1),e[17]||(e[17]=H("? This action cannot be undone.",-1))]),t("div",vt,[t("button",{onClick:ne,class:"flex-1 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-sm hover:bg-white/30 text-white border border-white/30"}," Cancel "),t("button",{onClick:ie,class:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded text-sm hover:from-red-600 hover:to-red-700 transform hover:scale-105 transition-all duration-200",disabled:f.value},g(f.value?"Deleting...":"Delete"),9,ht)])])])])):$("",!0)])]}),_:1}))}};export{pt as default};
